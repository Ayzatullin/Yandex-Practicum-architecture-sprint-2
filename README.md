# pymongo-api

Схема системы task_schema.drawio лежит в корневом каталоге проекта

## Структура файлов

- initial: изначальный проект с 1 MongoDB
- mongo-sharding: проект с 2 шардами MongoDB
- mongo-sharding-repl: проект с 2 шардами MongoDB и 3 репликами каждого шарда
- sharding-repl-cache: проект с 2 шардами MongoDB и 3 репликами каждого шарда и инстансом Redis для кэширования

### Примечание
В требованиях задано имя коллекции в БД с использованием camel case - helloDoc. 
При обращении к эндпоинтам, содержащим имя коллекции, браузер будет выполнять приведение к нижнему регистру, 
то есть фактически выполнять запросы к другой, пустой коллекции - hellodoc.
Рекомендуется использовать Postman или аналоги.

## Как запустить

Переходим в директорию *sharding-repl-cache*, выполняем 2 команды:

Запускаем mongodb и приложение

```shell
docker compose up -d
```

Инициализируем конфиг-сервер, шарды, реплики и роутер, а также заполняем mongodb данными.
Скрипты выводят в консоль общее количество созданных документов, а также их количество в каждом шарде

```shell
./scripts/mongo-init.sh
```